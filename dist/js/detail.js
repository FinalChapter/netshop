"use strict";function asyncGeneratorStep(n,o,a,e,t,i,c){try{var s=n[i](c),r=s.value}catch(n){return void a(n)}s.done?o(r):Promise.resolve(r).then(e,t)}function _asyncToGenerator(s){return function(){var n=this,c=arguments;return new Promise(function(o,a){var e=s.apply(n,c);function t(n){asyncGeneratorStep(e,o,a,t,i,"next",n)}function i(n){asyncGeneratorStep(e,o,a,t,i,"throw",n)}t(void 0)})}}$(function(){$(".login").on("click",function(){window.location.href="../html/login.html"}),$(".apply").on("click",function(){window.location.href="../html/register.html"});var n=getCookie("nickname");n&&($(".user-login-in").html("欢迎！ ".concat(n,'<ul class="hide"><li>退出登录</li></li>')),$(".user-login-in").on("click",function(){$(".user-login-in>ul").toggleClass("hide")}),$(".user-login-in>ul").on("click",function(){setCookie("nickname","",-1),window.location.href="../html/index.html"}));var a,e=getCookie("goods_id"),t=null;function o(){return(o=_asyncToGenerator(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$.get("../server/getGoodsInfo.php","goods_id=".concat(e),null,"json");case 2:a=n.sent,t=a.info,o=a.info,$("#enlarge-box").html('\n          <div class="show">\n          <img src="'.concat(o.goods_big_logo,'" alt="">\n          <div class="mask"></div>\n        </div>\n        <div class="list">\n          <p class="active">\n            <img src="').concat(o.goods_small_logo,'" show="').concat(o.goods_big_logo,'" enlarge="').concat(o.goods_big_logo,'" alt="">\n          </p>\n        </div>\n        \x3c!-- 放大镜盒子 --\x3e\n        <div class="enlarge" style="background-image: url(').concat(o.goods_big_logo,');"></div>\n          ')),$(".goods-main-info").html("\n       <h3>".concat(o.goods_name,'</h3>\n       <p>1080P高清 增强夜视 AI增强人形侦测</p>\n       <a href="">2k高清新品摄像机、存储卡、上墙支架等更多商品，点击查看>></a>\n       <ol class="priceBox">\n        <li><i>价&nbsp;&nbsp;&nbsp;格</i><b class="curr-price">￥').concat(o.goods_price,'</b><span class="old-price">￥169</span></li>\n        <li>\n          <i>促&nbsp;&nbsp;&nbsp;销</i>\n          <ul class="discount">\n            <li><span>直降</span>立减 40.00 元</li>\n            <li><span>满赠</span>满399元送数据线</li>\n         </ul>\n        </li>\n        </ol>\n       <div class="goods-type">\n        <i>分&nbsp;&nbsp;&nbsp;类</i>\n        <span class="active">标配</span>\n       </div>\n       <div class="goods-number">\n           <i>数&nbsp;&nbsp;&nbsp;量</i>\n          <p><span class="subNum">-</span><input type="text" value ="1" class="cartNum"><span class="addNum">+</span></p> \n       </div>\n       <div class="opt">\n         <a href="../html/list.html" class="golist" >继续购买</a>\n         <span  class="addCart">加入购物车</span>\n       </div>      \n       ')),$(".goodsDesc").html(o.goods_introduce),new magnifier("#enlarge-box");case 5:case"end":return n.stop()}var o},n)}))).apply(this,arguments)}!function(){o.apply(this,arguments)}(),$(".goods-main-info").on("click",".addCart",function(){var n=JSON.parse(window.localStorage.getItem("cart"))||[],o=n.some(function(n){return n.goods_id==e});if(!/^[0-9]+$/.test(+$(".cartNum").val())||0==+$(".cartNum").val())return alert("请输入正确数量");o?(o=n.filter(function(n){return n.goods_id==e})[0]).cart_number=+o.cart_number+ +$(".cartNum").val():(t.cart_number=+$(".cartNum").val(),n.push(t)),window.localStorage.setItem("cart",JSON.stringify(n)),alert("成功加入".concat(+$(".cartNum").val(),"件商品"))}).on("click",".subNum",function(){var n=+$(".cartNum").val();1<n&&n--,$(".cartNum").val(n)}).on("click",".addNum",function(){var n=+$(".cartNum").val();n++,$(".cartNum").val(n)}).on("click",".goGoodList",function(){window.location.href="./list.html"}),$(".index-cart").on("click",".cart-img",function(){window.location.href="../html/cart.html"}),a=$(".searchbox ol")[0],$(".searchbox .searchInp")[0].addEventListener("input",function(){var n,o;(value=this.value.trim())?(n="https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&sugsid=1446,32857,33124,33061,32973,33099,33101,32962,22159&wd=".concat(value,"&req=2&csor=1&cb=bindSearchHtml&_=1605768936993"),(o=document.createElement("script")).src=n,document.body.appendChild(o),o.remove()):$(a).addClass("hide")})});var value="";function bindSearchHtml(n){var o=$(".searchbox ol")[0];if(n.g&&value){for(var a=document.createDocumentFragment(),e=0;e<n.g.length;e++){var t=document.createElement("li");t.innerHTML=n.g[e].q,a.appendChild(t)}o.innerHTML="",o.appendChild(a),$(o).removeClass("hide")}else $(o).addClass("hide")}