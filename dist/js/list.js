"use strict";function asyncGeneratorStep(t,n,e,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(a,r)}function _asyncToGenerator(c){return function(){var t=this,i=arguments;return new Promise(function(n,e){var a=c.apply(t,i);function r(t){asyncGeneratorStep(a,n,e,r,o,"next",t)}function o(t){asyncGeneratorStep(a,n,e,r,o,"throw",t)}r(void 0)})}}$(function(){$(".login").on("click",function(){window.location.href="../html/login.html"}),$(".apply").on("click",function(){window.location.href="../html/register.html"});var t=getCookie("nickname");t&&($(".user-login-in").html("欢迎！ ".concat(t,'<ul class="hide"><li>退出登录</li></li>')),$(".user-login-in").on("click",function(){$(".user-login-in>ul").toggleClass("hide")}),$(".user-login-in>ul").on("click",function(){setCookie("nickname","",-1),window.location.href="../html/index.html"}));var e,a={cat_one:"all",sort_method:"默认",sort_type:"ASC",current:1,pagesize:20},r=null;function n(){return(n=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../server/getCatOne.php",null,null,"json");case 2:n=t.sent,e='<span data-type="all" class="active">全部</span>',n.list.forEach(function(t){e+='<span data-type="'.concat(t.cat_one_id,'">').concat(t.cat_one_id,"</span>")}),$(".first-type >.type-list").html(e);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function o(){return i.apply(this,arguments)}function i(){return(i=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../server/getPageTotal.php",a,null,"json");case 2:n=t.sent,$(".pagination").pagination({pageCount:n.data,coping:!0,homePage:"首页",endPage:"末页",callback:function(t){a.current=t.getCurrent(),c()}});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function c(){return s.apply(this,arguments)}function s(){return(s=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("../server/getGoodsList.php",a,null,"json");case 2:n=t.sent,e="",r=n.list,n.list.forEach(function(t,n){e+='<div class="goods-item" style="'.concat((n+1)%5==0?"margin-right:0":"",'">\n             <img src="').concat(t.goods_big_logo,'" alt="">\n            <p data-id="').concat(t.goods_id,'" style="cursor: pointer;">').concat(t.goods_name,"</p>\n            <i >￥").concat(t.goods_price,'</i>\n            <span class="glyphicon glyphicon-shopping-cart addCart" data-id="').concat(t.goods_id,'">加入购物车</span>\n            </div>')}),$(".goods-list-center").html(e);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){n.apply(this,arguments)}(),o(),c(),$(".first-type >.type-list").on("click","span",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).attr("data-type");a.cat_one=t,a.current=1,o(),c()}),$(".sort-type > .type-list").on("click","span",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).attr("data-method"),n=$(this).attr("data-type");a.sort_method=t,a.sort_type=n,o(),c(),$(this).attr("data-type","ASC"===n?"DESC":"ASC").siblings().attr("data-type","ASC")}),$(".goods-list-center").on("click","p",function(){var t=$(this).attr("data-id");setCookie("goods_id",t),window.location.href="../html/detail.html"}),$(".goods-list-center").on("click",".addCart",function(){var t,n=JSON.parse(window.localStorage.getItem("cart"))||[],e=$(this).attr("data-id");n.some(function(t){return t.goods_id==e})?(t=n.filter(function(t){return t.goods_id==e})[0]).cart_number=+t.cart_number+1:((t=r.filter(function(t){return t.goods_id==e})[0]).cart_number=1,n.push(t)),window.localStorage.setItem("cart",JSON.stringify(n))}),$(".index-cart").on("click",".cart-img",function(){window.location.href="../html/cart.html"}),e=$(".searchbox ol")[0],$(".searchbox .searchInp")[0].addEventListener("input",function(){var t,n;(value=this.value.trim())?(t="https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&sugsid=1446,32857,33124,33061,32973,33099,33101,32962,22159&wd=".concat(value,"&req=2&csor=1&cb=bindSearchHtml&_=1605768936993"),(n=document.createElement("script")).src=t,document.body.appendChild(n),n.remove()):$(e).addClass("hide")})});var value="";function bindSearchHtml(t){var n=$(".searchbox ol")[0];if(t.g&&value){for(var e=document.createDocumentFragment(),a=0;a<t.g.length;a++){var r=document.createElement("li");r.innerHTML=t.g[a].q,e.appendChild(r)}n.innerHTML="",n.appendChild(e),$(n).removeClass("hide")}else $(n).addClass("hide")}